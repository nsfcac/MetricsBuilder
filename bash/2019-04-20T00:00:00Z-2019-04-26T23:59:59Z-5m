#!/usr/bin/bash

QPROF=$HOME/go/bin/qprof

$QPROF -db hpcc_monitoring_db -host http://localhost:8086 -out ./profiles -n 10 "SELECT MAX(*) FROM Inlet_Temperature WHERE host='10.101.4.33' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MAX(*) FROM CPU_Temperature WHERE host='10.101.1.54' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MIN(*) FROM CPU_Temperature WHERE host='10.101.9.57' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MIN(*) FROM Fan_Speed WHERE host='10.101.4.12' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MEAN(*) FROM Memory_Usage WHERE host='10.101.2.59' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MEAN(*) FROM Node_Power_Usage WHERE host='10.101.5.20' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT DISTINCT('job_data') FROM Job_Info WHERE host='10.101.1.45' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MEAN(*) FROM Fan_Speed WHERE host='10.101.2.23' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MAX(*) FROM Inlet_Temperature WHERE host='10.101.8.2' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MIN(*) FROM Memory_Usage WHERE host='10.101.2.33' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1;"