#!/usr/bin/bash

QPROF=$HOME/go/bin/qprof

$QPROF -db hpcc_monitoring_db -host http://localhost:8086 -out ./profiles -n 10 "SELECT MIN(*) FROM Inlet_Temperature WHERE host='10.101.10.33' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MIN(*) FROM CPU_Usage WHERE host='10.101.2.37' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MIN(*) FROM CPU_Temperature WHERE host='10.101.7.2' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MAX(*) FROM Memory_Usage WHERE host='10.101.2.55' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MIN(*) FROM CPU_Temperature WHERE host='10.101.6.3' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MEAN(*) FROM CPU_Usage WHERE host='10.101.1.45' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MIN(*) FROM Inlet_Temperature WHERE host='10.101.8.7' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT DISTINCT('job_data') FROM Job_Info WHERE host='10.101.7.49' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MIN(*) FROM Inlet_Temperature WHERE host='10.101.7.10' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MIN(*) FROM Inlet_Temperature WHERE host='10.101.5.3' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1;"