#!/usr/bin/bash

QPROF=$HOME/go/bin/qprof

$QPROF -db hpcc_monitoring_db -host http://localhost:8086 -out ./profiles -n 8 "SELECT MEAN(*) FROM Inlet_Temperature WHERE host='10.101.9.48' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MEAN(*) FROM Memory_Usage WHERE host='10.101.8.38' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MAX(*) FROM Memory_Usage WHERE host='10.101.4.43' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MIN(*) FROM CPU_Usage WHERE host='10.101.1.7' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MAX(*) FROM CPU_Temperature WHERE host='10.101.3.37' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MAX(*) FROM Inlet_Temperature WHERE host='10.101.5.2' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MEAN(*) FROM Memory_Usage WHERE host='10.101.4.43' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MEAN(*) FROM CPU_Usage WHERE host='10.101.1.43' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MAX(*) FROM CPU_Temperature WHERE host='10.101.8.3' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MEAN(*) FROM CPU_Temperature WHERE host='10.101.7.7' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1;"