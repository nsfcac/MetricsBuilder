#!/usr/bin/bash

QPROF=$HOME/go/bin/qprof

$QPROF -db hpcc_monitoring_db -host http://localhost:8086 -out ./profiles -n 887 "SELECT MEAN(*) FROM Fan_Speed WHERE host='10.101.3.49' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MAX(*) FROM Node_Power_Usage WHERE host='10.101.8.4' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MEAN(*) FROM CPU_Temperature WHERE host='10.101.9.39' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MAX(*) FROM Node_Power_Usage WHERE host='10.101.9.6' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MAX(*) FROM Fan_Speed WHERE host='10.101.4.45' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT DISTINCT('job_data') FROM Job_Info WHERE host='10.101.6.11' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MIN(*) FROM Node_Power_Usage WHERE host='10.101.2.7' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT DISTINCT('job_data') FROM Job_Info WHERE host='10.101.10.27' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MIN(*) FROM Node_Power_Usage WHERE host='10.101.10.34' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1; SELECT MAX(*) FROM Inlet_Temperature WHERE host='10.101.9.3' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) SLIMIT 1;"