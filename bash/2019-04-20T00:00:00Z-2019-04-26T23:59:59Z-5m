#!/usr/bin/bash

QPROF=$HOME/go/bin/qprof

$QPROF -db hpcc_monitoring_db -host http://localhost:8086 -out ./profiles -t 4m "SELECT MAX(*) FROM Node_Power_Usage WHERE host='10.101.1.31' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MIN(*) FROM CPU_Temperature WHERE host='10.101.1.36' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MAX(*) FROM Fan_Speed WHERE host='10.101.2.18' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MIN(*) FROM CPU_Temperature WHERE host='10.101.2.41' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MIN(*) FROM CPU_Temperature WHERE host='10.101.1.47' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MAX(*) FROM CPU_Usage WHERE host='10.101.6.12' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MAX(*) FROM Memory_Usage WHERE host='10.101.8.23' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MAX(*) FROM Memory_Usage WHERE host='10.101.9.36' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MIN(*) FROM CPU_Temperature WHERE host='10.101.9.19' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1; SELECT MAX(*) FROM Inlet_Temperature WHERE host='10.101.4.46' AND time >= '2019-04-20T00:00:00Z' AND time <= '2019-04-26T23:59:59Z' GROUP BY *, time(5m) fill(0) SLIMIT 1;"